<section id="dashbaord">
  <div class="contain-fluid">
    <div class="heading">
      <div class="text">
        <h3>Edit Rider</h3>
      </div>
      <div class="text text2">
        <a href="/admin/riders" class="webBtn mdBtn greenBtn"
          ><i class="fa-regular fa-arrow-left"></i>Back</a
        >
      </div>
    </div>
    <div class="dashTable">
      <form
        action="/admin/riders/update/<%= rider.id %>"
        method="POST"
        enctype="multipart/form-data"
        class="frmAjax">
        <div class="card">
          <div class="card-header">
            <h5>General Details</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="first_name">Full Name:</label>
                  <input
                    type="text"
                    class="input"
                    name="full_name"
                    value="<%= rider.full_name %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="email">Email:</label>
                  <input
                    type="text"
                    class="input"
                    name="email"
                    value="<%= rider.email %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="mem_phone">Phone:</label>
                  <input
                    type="text"
                    class="input"
                    name="mem_phone"
                    value="<%= rider.mem_phone %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="dob">Date of Birth:</label>
                  <input
                    type="text"
                    class="input"
                    name="dob"
                    value="<%= rider.dob %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="address">Address:</label>
                  <input
                    type="text"
                    class="input"
                    name="mem_address1"
                    value="<%= rider.mem_address1 %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="city">City:</label>
                  <input
                    type="text"
                    class="input"
                    name="city"
                    value="<%= rider.city %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="vehicle_type">Vehicle Type:</label>
                  <input
                    type="text"
                    class="input"
                    name="vehicle_type"
                    value="<%= rider.vehicle_type %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="vehicle_registration_num">Vehicle Registration Number:</label>
                  <input
                    type="text"
                    class="input"
                    name="vehicle_registration_num"
                    value="<%= rider.vehicle_registration_num %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="driving_license_num">Driving License Number:</label>
                  <input
                    type="text"
                    class="input"
                    name="driving_license_num"
                    value="<%= rider.driving_license_num %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="state">Status:</label>
                  <label class="switch">
                    <span
                      class="switch-state bg-primary"></span>
                  </label>
                  <select name="status" class="input">
                    <option value="1" <%= rider.status == 1 ? 'selected' : '' %>>Active</option>
                    <option value="0" <%= rider.status == 0 ? 'selected' : '' %>>Inactive</option>
                </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="txtGrp">
                  <label class="form-label" for="state">Do you own a vehicle?:</label>
                  <label class="switch">
                    <span
                      class="switch-state bg-primary"></span>
                  </label>
                  <select name="vehicle_owner">
                    <option value="yes" <%= rider.vehicle_owner == "yes" ? 'selected' : '' %>>Yes</option>
                    <option value="no" <%= rider.vehicle_owner == "no" ? 'selected' : '' %>>No</option>
                </select>
                </div>
              </div>

              <div class="clearfix"></div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
              <div class="card">
                  <div class="card-body preview">
                    <div class="row">
                        <div class="col-md-12">
                          <h5 class="card-title">Driving License</h5>
                          <div class="blog_img">
                            <% if (attachments.driving_license) { %>
                            <img
                              src="<%= helpers.getImage(attachments.driving_license) %>"
                              alt="Main Image"
                              class="card-img-top" />

                            <% } %>
                          </div>
                          <div class="in-upload">
                            <button type="button" class="uploadImg">
                              <i class="fa-regular fa-image"></i>choose another image
                            </button>
                            <input type="file" class="uploadFile" name="driving_license"                         
                            value="<%= attachments.driving_license ? attachments.driving_license : '' %>"
                            />
                          </div>
                        </div>
                    </div>
                </div>
              </div>
          </div>
          <div class="col-md-4">
              <div class="card">
                  <div class="card-body preview">
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="card-title">Address Proof</h5>
                        <div class="blog_img">
                          <% if (attachments.address_proof) { %>
                          <img
                            src="<%= helpers.getImage(attachments.address_proof) %>"
                            alt="Main Image"
                            class="card-img-top" />

                          <% } %>
                        </div>
                        <div class="in-upload">
                          <button type="button" class="uploadImg">
                            <i class="fa-regular fa-image"></i>choose Address Proof
                          </button>
                          <input type="file" class="uploadFile" name="address_proof"                         
                          value="<%= attachments.address_proof ? attachments.address_proof : '' %>"
                          />
                        </div>
                      </div>
                    </div>
                </div>
              </div>
          </div>
          <div class="col-md-4">
              <div class="card">
                  <div class="card-body preview">
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="card-title">Self Picture</h5>
                        <div class="blog_img">
                          <% if (attachments.self_picture) { %>
                          <img
                            src="<%= helpers.getImage(attachments.self_picture) %>"
                            alt="Main Image"
                            class="card-img-top" />

                          <% } %>
                        </div>
                        <div class="in-upload">
                          <button type="button" class="uploadImg">
                            <i class="fa-regular fa-image"></i>choose Self Picture
                          </button>
                          <input type="file" class="uploadFile" name="self_picture"                         
                          value="<%= attachments.self_picture ? attachments.self_picture : '' %>"
                          />
                        </div>
                      </div>
                    </div>
                </div>
              </div>
          </div>
        </div>
        <div class="clearfix"></div>
        <div class="row">
          <div class="col-md-4">
              <div class="card">
                  <div class="card-body preview">
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="card-title">Passport Picture</h5>
                        <div class="blog_img">
                          <% if (attachments.passport_pic) { %>
                          <img
                            src="<%= helpers.getImage(attachments.passport_pic) %>"
                            alt="Main Image"
                            class="card-img-top" />

                          <% } %>
                        </div>
                        <div class="in-upload">
                          <button type="button" class="uploadImg">
                            <i class="fa-regular fa-image"></i>choose Passport Picture
                          </button>
                          <input type="file" class="uploadFile" name="passport_pic"                         
                          value="<%= attachments.passport_pic ? attachments.passport_pic : '' %>"
                          />
                        </div>
                      </div>
                    </div>
                </div>
              </div>
          </div>
          <div class="col-md-4">
              <div class="card">
                  <div class="card-body preview">
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="card-title">National Insurance</h5>
                        <div class="blog_img">
                          <% if (attachments.national_insurance) { %>
                          <img
                            src="<%= helpers.getImage(attachments.national_insurance) %>"
                            alt="Main Image"
                            class="card-img-top" />

                          <% } %>
                        </div>
                        <div class="in-upload">
                          <button type="button" class="uploadImg">
                            <i class="fa-regular fa-image"></i>choose National Insurance
                          </button>
                          <input type="file" class="uploadFile" name="national_insurance"                         
                          value="<%= attachments.national_insurance ? attachments.national_insurance : '' %>"
                          />
                        </div>
                      </div>
                    </div>
                </div>
              </div>
          </div>
          <div class="col-md-4">
              <div class="card">
                  <div class="card-body preview">
                    <div class="row">
                      <div class="col-md-12">
                        <h5 class="card-title">Company Certificate</h5>
                        <div class="blog_img">
                          <% if (attachments.company_certificate) { %>
                          <img
                            src="<%= helpers.getImage(attachments.company_certificate) %>"
                            alt="Main Image"
                            class="card-img-top" />

                          <% } %>
                        </div>
                        <div class="in-upload">
                          <button type="button" class="uploadImg">
                            <i class="fa-regular fa-image"></i>choose Company Certificate
                          </button>
                          <input type="file" class="uploadFile" name="company_certificate"                         
                          value="<%= attachments.company_certificate ? attachments.company_certificate : '' %>"
                          />
                        </div>
                      </div>
                    </div>
                </div>
              </div>
          </div>
        </div>
        <div class="clearfix"></div>
        <div class="row">
          <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                          <h5 class="card-title">Front/Back and Side Pictures</h5>
                          <div class="blog_img multiple_rider_attachments" style="overflow-x:auto; white-space:nowrap; padding-bottom:1em;">
                            <% if (Array.isArray(attachments.pictures)) { %>
  <% attachments.pictures.forEach((att_pic, index) => { %>
    <div class="img_show" style="display:inline-block; position:relative; margin-right:8px">
      <div class="inner">
        <img src="/uploads/<%= att_pic.filename %>" style="width:150px; height:auto;" />
        <span class="x_btn deleteServerImage crosBtn"
              data-id="<%= att_pic.id %>"
              data-rider_id="<%= att_pic.rider_id %>">
        </span>
      </div>
    </div>
  <% }) %>
<% } %>

                          </div>
                          <div class="in-upload">
                            
                            <input type="file" id="rider_pictures" name="pictures" value="<%= attachments.pictures ? attachments.pictures : '' %>" class="" multiple accept="image/*" />
                            <div id="picturesPreview" class="d-flex flex-wrap gap-2 mt-3"></div>

                            <div id="uploadLoader"></div>
                          </div>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="card-footer text-end">
                  <button class="webBtn" type="submit">
                    Update <i class="spinner hidden"></i>
                  </button>
                </div>
            </div>
          </div>
        </div>          
      </form>
    </div>
  </div>
</section>
